{% extends "base.html" %}
{% load static %}

{% block content %}

  <section class="bandeauProfil">

    <div class="profilInfos">
      <h3>Profil</h3>
      <h1>{{ user.username }}</h1>
      <br>
      <p><strong>Email</strong> {{ user.email }}</p>
      {% if user.first_name %}
      <p><strong>Prénom</strong> {{ user.first_name }}</p>
      {% endif %}
      {% if user.first_name %}
      <p><strong>Nom</strong> {{ user.last_name }}</p>
      {% endif %}
    </div>

    <div class="profilPhoto">
      {% if user.profile_photo %}
        <img class="profilePicture" src="{% static 'images/default_profile.png' %}" alt="Photo par défaut" width="150" height="150">
        <!-- <img class="profilePicture" src="{{ user.profile_photo.url }}" alt="Photo de profil de {{ user.username }}" width="150" height="150"> -->
      {% else %}
        <img class="profilePicture" src="{% static 'images/default_profile.png' %}" alt="Photo par défaut" width="150" height="150">
      {% endif %}
    </div>
  </section>

  <section class="sectionProfil">
    <h2>Post{{ articles|length|pluralize:"s" }} <br> {{ articles|length }}</h2>
  </section>

  <section class="bandeauModifProfil">
    <div class="buttonGroup">
      <a href="{% url 'edit_profile' %}" class="plainButton">Modifier mon profil</a>
      <a href="{% url 'delete_profile' %}" class="plainButton">Supprimer mon profil</a>
    </div>
  </section>
  
  <section class="sectionProfil">
    <h2>Mes articles</h2>
    {% if articles %}
      <ul class="listArticles">
        {% for article in articles %}
          <a href="{% url 'article_detail_html' article.id %}">
            <li>
            {{ article.created_at|date:"d/m/Y - H:i" }}<br>
            <strong>{{ article.title }}</strong><br>
            {{ article.content|truncatewords:20 }}
          </li>
          </a>
          
        {% endfor %}
      </ul>
    {% else %}
      <p>Tu n’as pas encore publié d’article.</p>
    {% endif %}
  </section>
{% endblock %}